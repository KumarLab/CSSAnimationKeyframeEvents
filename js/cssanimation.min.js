/*
 CSSAnimation v0.1
 Provides 'cssAnimationKeyframe' events for keyframe animations.
 http://www.joelambert.co.uk/cssa

 Copyright 2011, Joe Lambert. All rights reserved
 Free to use under the MIT license.
 http://www.opensource.org/licenses/mit-license.php
*/
var CSSAnimation={version:"0.1"};CSSAnimation.find=function(b){for(var f=document.styleSheets,d=f.length-1;d>=0;d--){var a=f[d];a=a.cssRules?a.cssRules:a.rules?a.rules:[];for(var c=a.length-1;c>=0;c--)if(a[c].type===window.CSSRule.WEBKIT_KEYFRAMES_RULE&&a[c].name==b)return a[c]}return null};
CSSAnimation.trigger=function(b,f,d,a){var c={},l={},h=null,i=0,m={base:5,easing:"linear"},e;for(e in a)m[e]=a[e];if(!b.isPlaying){h=CSSAnimation.find(f);if(!h)return false;c={};for(a=0;a<h.cssRules.length;a++){e=h.cssRules[a];var n=e.keyText,g=0;n=="from"?g=0:n=="to"?g=1:g=n.replace("%","")/100;c[g*100+"%"]=e}i=(new Date).getTime();var j=g=roundedKey=keyframe=null,p=function(o,q){var k=document.createEvent("Event");k.initEvent("cssAnimationKeyframe");k.keyText=o;k.elapsedTime=q;b.dispatchEvent(k)};
b.style.webkitAnimationDuration=d+"ms";b.style.webkitAnimationTimingFunction=m.easing;b.style.webkitAnimationName=f;b.isPlaying=true;(function o(){j=(new Date).getTime();percent=Math.floor((j-i)/d*100);key=percent-percent%m.base+"%";if((keyframe=c[key])&&!l[key]){l[key]=true;p(key,(j-i)/1E3)}if(percent<100)requestAnimFrame(o,b);else{l["100%"]||p("100%",(j-i)/1E3);b.style.webkitAnimationDuration=null;b.style.webkitAnimationTimingFunction=null;b.style.webkitAnimationName=null;b.isPlaying=false}})()}};
window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b){window.setTimeout(b,1E3/60)}}();
